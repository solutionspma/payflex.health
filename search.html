<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Find a Provider â€” PayFlex</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    .search-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 60px 20px;
    }

    .search-box {
      background: white;
      padding: 32px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }

    .search-fields {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }

    .search-field {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .search-field label {
      font-family: 'Inter', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: #374151;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .search-field input,
    .search-field select {
      padding: 12px 16px;
      border: 1.5px solid #d1d5db;
      border-radius: 6px;
      font-family: 'Inter', sans-serif;
      font-size: 15px;
    }

    .search-button {
      width: 100%;
      padding: 14px;
      background: var(--pfh-red);
      color: white;
      border: none;
      border-radius: 6px;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .search-button:hover {
      background: #9a1420;
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .provider-card {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .provider-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 12px rgba(0,0,0,0.15);
    }

    .provider-name {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      font-weight: 600;
      color: var(--pfh-blue);
      margin-bottom: 8px;
    }

    .provider-specialty {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 16px;
    }

    .provider-location {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      color: #374151;
      margin-bottom: 12px;
    }

    .accepting-badge {
      display: inline-block;
      padding: 4px 12px;
      background: #d1fae5;
      color: #065f46;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .not-found {
      text-align: center;
      padding: 60px 20px;
      background: white;
      border-radius: 12px;
    }

    .referral-form {
      background: #f9fafb;
      padding: 32px;
      border-radius: 12px;
      margin-top: 40px;
    }

    .referral-form h3 {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: var(--pfh-blue);
      margin-bottom: 16px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">PayFlex Health</a>
      <div class="nav-links">
        <a href="how-it-works.html">How It Works</a>
        <a href="for-providers.html">For Providers</a>
        <a href="search.html">Find a Provider</a>
        <a href="about.html">About</a>
        <a href="login.html" class="btn btn-nav">Login</a>
      </div>
    </div>
  </nav>

  <!-- Search Section -->
  <section class="section section-light">
    <div class="search-container">
      <div style="text-align: center; margin-bottom: 40px;">
        <h1 style="font-family: 'Playfair Display', serif; font-size: 42px; color: var(--pfh-blue); margin-bottom: 12px;">Find a Provider</h1>
        <p style="font-family: 'Inter', sans-serif; font-size: 18px; color: #6b7280;">Search for healthcare providers accepting PayFlex</p>
      </div>

      <div class="search-box">
        <div class="search-fields">
          <div class="search-field">
            <label>Provider Name</label>
            <input type="text" id="searchName" placeholder="Enter provider name">
          </div>
          <div class="search-field">
            <label>Specialty</label>
            <select id="searchSpecialty">
              <option value="">All Specialties</option>
              <option value="cardiology">Cardiology</option>
              <option value="dermatology">Dermatology</option>
              <option value="family_medicine">Family Medicine</option>
              <option value="internal_medicine">Internal Medicine</option>
              <option value="pediatrics">Pediatrics</option>
              <option value="psychiatry">Psychiatry</option>
              <option value="surgery">Surgery</option>
            </select>
          </div>
          <div class="search-field">
            <label>City</label>
            <input type="text" id="searchCity" placeholder="Enter city">
          </div>
          <div class="search-field">
            <label>State</label>
            <select id="searchState">
              <option value="">All States</option>
              <option value="GA">Georgia</option>
              <option value="FL">Florida</option>
              <option value="AL">Alabama</option>
              <option value="SC">South Carolina</option>
              <option value="NC">North Carolina</option>
              <option value="TN">Tennessee</option>
            </select>
          </div>
        </div>
        <button class="search-button" onclick="searchProviders()">Search Providers</button>
      </div>

      <div id="searchResults">
        <!-- Results will be displayed here -->
      </div>

      <div id="notFound" class="not-found" style="display: none;">
        <h3 style="font-family: 'Playfair Display', serif; font-size: 28px; color: var(--pfh-blue); margin-bottom: 16px;">No providers found</h3>
        <p style="font-family: 'Inter', sans-serif; color: #6b7280; margin-bottom: 24px;">Can't find your provider? Invite them to join PayFlex.</p>
        
        <div class="referral-form">
          <h3>Invite a Provider</h3>
          <p style="font-family: 'Inter', sans-serif; font-size: 15px; color: #6b7280; margin-bottom: 24px;">
            Know a healthcare provider that should offer PayFlex? Send them an invitation.
          </p>
          <div class="form-grid">
            <div class="search-field">
              <label>Provider Name</label>
              <input type="text" id="referralName" placeholder="Dr. Smith or ABC Medical">
            </div>
            <div class="search-field">
              <label>Email</label>
              <input type="email" id="referralEmail" placeholder="email@example.com">
            </div>
            <div class="search-field">
              <label>Phone (optional)</label>
              <input type="tel" id="referralPhone" placeholder="(555) 123-4567">
            </div>
            <div class="search-field">
              <label>Specialty</label>
              <select id="referralSpecialty">
                <option value="cardiology">Cardiology</option>
                <option value="dermatology">Dermatology</option>
                <option value="family_medicine">Family Medicine</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          <button class="search-button" onclick="submitReferral()">Send Invitation</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <div class="footer-logo">PayFlex Health</div>
          <p class="footer-tagline">Healthcare access without the capital barrier.</p>
        </div>
        <div class="footer-links">
          <h4>Product</h4>
          <a href="how-it-works.html">How It Works</a>
          <a href="for-providers.html">For Providers</a>
          <a href="search.html">Find a Provider</a>
        </div>
        <div class="footer-links">
          <h4>Company</h4>
          <a href="about.html">About</a>
          <a href="https://payflexsystems.com">PayFlex Systems</a>
        </div>
        <div class="footer-links">
          <h4>Legal</h4>
          <a href="privacy.html">Privacy Policy</a>
          <a href="terms.html">Terms of Service</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2026 PayFlex Health. A product of PayFlex Systems. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script type="module">
    async function searchProviders() {
      const name = document.getElementById('searchName').value;
      const specialty = document.getElementById('searchSpecialty').value;
      const city = document.getElementById('searchCity').value;
      const state = document.getElementById('searchState').value;

      // TODO: Query public_directory table
      // For now, show mock results or not found
      
      // Mock data
      const mockProviders = [
        {
          display_name: 'Dr. LauraLee Parris Cardiology',
          specialties: ['cardiology'],
          city: 'Atlanta',
          state: 'GA',
          accepting_patients: true,
          listing_data: {
            phone: '(404) 555-1234',
            description: 'Board-certified cardiologist specializing in preventive care'
          }
        }
      ];

      displayResults(mockProviders);
    }

    function displayResults(providers) {
      const resultsDiv = document.getElementById('searchResults');
      const notFoundDiv = document.getElementById('notFound');

      if (providers.length === 0) {
        resultsDiv.innerHTML = '';
        notFoundDiv.style.display = 'block';
        return;
      }

      notFoundDiv.style.display = 'none';
      
      resultsDiv.innerHTML = '<div class="results-grid">' + 
        providers.map(p => `
          <div class="provider-card">
            <div class="provider-name">${p.display_name}</div>
            <div class="provider-specialty">${p.specialties ? p.specialties.join(', ') : 'Healthcare Provider'}</div>
            <div class="provider-location">${p.city}, ${p.state}</div>
            ${p.accepting_patients ? '<span class="accepting-badge">Accepting Patients</span>' : ''}
            ${p.listing_data?.description ? `<p style="margin-top: 12px; font-size: 14px; color: #6b7280;">${p.listing_data.description}</p>` : ''}
            ${p.listing_data?.phone ? `<p style="margin-top: 12px; font-size: 14px; color: #374151;"><strong>Phone:</strong> ${p.listing_data.phone}</p>` : ''}
          </div>
        `).join('') +
      '</div>';
    }

    async function submitReferral() {
      const name = document.getElementById('referralName').value;
      const email = document.getElementById('referralEmail').value;
      const phone = document.getElementById('referralPhone').value;
      const specialty = document.getElementById('referralSpecialty').value;

      if (!name || !email) {
        alert('Please enter provider name and email');
        return;
      }

      // TODO: Insert into tenant_referrals table
      console.log('Referral submitted:', { name, email, phone, specialty });
      
      alert('Thank you! We\'ll reach out to this provider about joining PayFlex.');
      
      // Clear form
      document.getElementById('referralName').value = '';
      document.getElementById('referralEmail').value = '';
      document.getElementById('referralPhone').value = '';
    }

    // Make functions global
    window.searchProviders = searchProviders;
    window.submitReferral = submitReferral;
  </script>
</body>
</html>
